<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CaleyRun</title>
    <link rel="stylesheet" href="../static/css/public.css">
    <link rel="stylesheet" href="../static/css/index.css">
    <link rel="stylesheet" href="../static/css/caley.css">
    <link rel="stylesheet" href="../static/css/bootstrap.css">
    <style>
    .hahamiddle {
        width: 80%;
        margin: 0 auto;
        padding: 20px;
    }

    .caley-bg-img {
        background-image: url('../static/img/creatgroup-bg2.png');
        background-size: cover;
        background-position: center;
        width: 100%;
        min-height: 69vh;
    }
    </style>
    
</head>

<body>
    <div class="video-bg">
        <img src="../static/img/creatgroup-bg1.png" alt="" class="bg-img">
        <div class="banner1-info new">
            <div class="wording">
				<br>
                <div class="move-logo"></div>
                <div class="move-title">空调总机</div>
                <div class="power-button">
                    <button class="btn btn-danger" id="powerButton">关机</button>
                </div>
                <div class="move-desc">
                </div>
            </div>
        </div>
    </div>
    <div class="header">
        <div class="h-inner">
            <h1 class="logo">
                <a href="{% url 'index' %}"></a>
                <!-- <img src="./img/logo.png" alt="TIM"> -->
            </h1>
            <div class="nav">
                <ul class="nav-ul">
                    <li class="nav-item"><a href="{% url 'index' %}">首页</a></li>
                    <li class="nav-item"><a href="{% url 'airconlist' %}" class="active">浏览/管理空调</a></li>
                    <li class="nav-item"><a href="./support.html">个人中心</a></li>
                </ul>
            </div>
            <div class="login-register">
                <a href="{% url 'register' %}">登录/注册</a>
            </div>
        </div>
    </div>
    <div class="caley-bg-img">
        <div class="container">
        <h2>正在进行的请求</h2>
        <table class="table table-bordered status-table">
            <thead>
                <tr>
                    <th>房间号</th>
                    <th>房间温度</th>
                    <th>预设温度</th>
                    <th>预设风速</th>
                </tr>
            </thead>
            <tbody id="activeRequests">
                <!-- 动态生成的正在进行的请求行 -->
            </tbody>
        </table>

        <h2>正在等待的请求</h2>
        <table class="table table-bordered status-table">
            <thead>
                <tr>
                    <th>房间号</th>
                    <th>房间温度</th>
                    <th>预设温度</th>
                    <th>预设风速</th>
                    <th>已等待时间</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody id="waitingRequests">
                <!-- 动态生成的正在等待的请求行 -->
            </tbody>
        </table>
    </div>
    </div>


    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bj-report-tryjs.min.js"></script>
    <script src="../static/js/swiper-3.4.2.jquery.min.js"></script>
    <script src="../static/js/bootstrap.js"></script>

    <script>
        function validateForm() {
            var group_name = document.getElementById("group_name").value;
            var group_kp = document.getElementById("group_kp").value;
            var group_password = document.getElementById("group_password").value;
            var grouptype = document.getElementById("grouptype").value;
            var maxnum = document.getElementById("maxnum").value;
            var group_tag = document.getElementById("group_tag").value;
            var group_headimg = document.getElementById("group_headimg");
            var group_headimgSize = group_headimg.files[0].size;
            var group_headimgType = group_headimg.files[0].type;
            var alert_msg = '';

  
            if (group_name == "") {
                alert_msg += "请输入团名称\n";
            }
  
            if (group_kp == "") {
                alert_msg += "请指定团KP\n";
            }

            if (len(group_name)>30){
                alert_msg += "团名称过长，请限制在30以内\n";
            }

            if (grouptype="需要密码" && group_password==""){
                alert_msg += "您选择了使用密码但您未设置密码\n";
            }

            if(len(group_password)>30){
                alert_msg += "密码过长，请限制在30以内\n";
            }

            if(len(group_tag)<5){
                alert_msg += "团描述至少5个字符\n";
            }

            if(len(group_tag)>200){
                alert_msg += "团描述至多200个字符\n";
            }

            if (group_headimgSize > 5000000) {
                alert_msg += "头像文件大小需小于5MB";
                fileInput.value = "";
            }

            if (group_headimgType != "image/jpeg" && fileType != "image/png") {
                alert_msg += "头像文件只允许png或jpg格式";
                fileInput.value = "";
            }

            if(alert_msg){
                alert(alert_msg);
                event.preventDefault();
                return false;
            }
            return true;
            }
    </script>

    <script>
        var windowHeight = $(window).height()
            // 页面滚动触发播放事件
        function pageScroll() {
            var documentScrollTop = $(document).scrollTop()

            if (documentScrollTop > 10) {
                $('.header').addClass('scrollTop')
            } else {
                $('.header').removeClass('scrollTop')
            }
        }
        $(document).scroll(pageScroll)
        initVideoPosition()

        function initVideoPosition() {
            var w = 2560,
                h = 997,
                ml = 1298,
                mb = 126,
                mw = 180,
                mh = 319,
                pl = 1519,
                pb = 264,
                pw = 626,
                ph = 501,
                nw = (document.body.clientWidth).toFixed(9),
                nh = (nw * h / w).toFixed(9),
                mlp = (ml / w).toFixed(9),
                mbp = (mb / h).toFixed(9),
                mwp = (mw / w).toFixed(9),
                mhp = (mh / h).toFixed(9),
                mlnpx = nw * mlp,
                mbnpx = nh * mbp,
                mwnpx = nw * mwp,
                mhnpx = nh * mhp,


                plp = (pl / w).toFixed(9),
                pbp = (pb / h).toFixed(9),
                pwp = (pw / w).toFixed(9),
                php = (ph / h).toFixed(9),
                plnpx = nw * plp,
                pbnpx = nh * pbp,
                pwnpx = nw * pwp,
                phnpx = nh * php
            $('.video-mob').css({
                bottom: mbnpx + 'px',
                left: mlnpx + 'px',
                width: mwnpx + 'px',
                height: mhnpx + 'px'
            })
            $('.video-pc').css({
                bottom: pbnpx + 'px',
                left: plnpx + 'px',
                width: pwnpx + 'px',
                height: phnpx + 'px'
            })

        }
        $('.wording').addClass('show')
        window.onresize = function() {
            initVideoPosition()
        }
        document.onmouseenter = function() {
            return false;
        }
        document.onmousemove = function() {
            return false;
        }
        document.oncontextmenu = function() {
            return false;
        }
    </script>

        <script>
        $(document).ready(function() {
            var coolingTemps = [25, 24, 23, 22, 21, 20, 19, 18];
            var heatingTemps = [25, 26, 27, 28, 29, 30];
            var selectedMode = '制冷';

            function updateTemperatureOptions() {
                var temps = selectedMode === '制冷' ? coolingTemps : heatingTemps;
                var tempDropdown = $('#temperatureDropdown');
                tempDropdown.empty();
                temps.forEach(function(temp) {
                    tempDropdown.append('<li><a href="#" class="temp-option">' + temp + '</a></li>');
                });
                $('#temperatureButton').text(temps[0]);
            }

            $(document).on('click', '.mode-option', function() {
                selectedMode = $(this).text();
                $('#modeButton').text(selectedMode);
                updateTemperatureOptions();
            });

            $(document).on('click', '.temp-option', function() {
                var selectedTemp = $(this).text();
                $('#temperatureButton').text(selectedTemp);
            });

            $(document).on('click', '.speed-option', function() {
                var selectedSpeed = $(this).text();
                $('#speedButton').text(selectedSpeed);
            });
            
            $(document).on('click', '.power-option', function() {
                var selectedMode = $(this).text();
                $('#powerButton').text(selectedMode);
                updateTemperatureOptions();
            });

            updateTemperatureOptions();
        });
    </script>

    <script>
        $(document).ready(function() {
            // 示例数据
            const activeRequests = [
                { room: '101', roomTemp: '22°C', presetTemp: '24°C', presetSpeed: '中' },
                { room: '102', roomTemp: '23°C', presetTemp: '25°C', presetSpeed: '高' },
                { room: '101', roomTemp: '22°C', presetTemp: '24°C', presetSpeed: '中' },
                { room: '102', roomTemp: '23°C', presetTemp: '25°C', presetSpeed: '高' },
                { room: '101', roomTemp: '22°C', presetTemp: '24°C', presetSpeed: '中' },
                { room: '102', roomTemp: '23°C', presetTemp: '25°C', presetSpeed: '高' },
                { room: '101', roomTemp: '22°C', presetTemp: '24°C', presetSpeed: '中' },
                { room: '102', roomTemp: '23°C', presetTemp: '25°C', presetSpeed: '高' },
                { room: '101', roomTemp: '22°C', presetTemp: '24°C', presetSpeed: '中' },
                { room: '102', roomTemp: '23°C', presetTemp: '25°C', presetSpeed: '高' },
                // 添加更多正在进行的请求
            ];

            const waitingRequests = [
                { room: '201', roomTemp: '24°C', presetTemp: '26°C', presetSpeed: '低', waitingTime: '5分钟' },
                { room: '202', roomTemp: '25°C', presetTemp: '27°C', presetSpeed: '中', waitingTime: '10分钟' },
                { room: '201', roomTemp: '24°C', presetTemp: '26°C', presetSpeed: '低', waitingTime: '5分钟' },
                { room: '202', roomTemp: '25°C', presetTemp: '27°C', presetSpeed: '中', waitingTime: '10分钟' },
                { room: '201', roomTemp: '24°C', presetTemp: '26°C', presetSpeed: '低', waitingTime: '5分钟' },
                { room: '202', roomTemp: '25°C', presetTemp: '27°C', presetSpeed: '中', waitingTime: '10分钟' },
                // 添加更多正在等待的请求
            ];

            // 生成正在进行的请求行
            activeRequests.forEach(request => {
                $('#activeRequests').append(`
                    <tr>
                        <td>${request.room}</td>
                        <td>${request.roomTemp}</td>
                        <td>${request.presetTemp}</td>
                        <td>${request.presetSpeed}</td>
                    </tr>
                `);
            });

            // 生成正在等待的请求行
            waitingRequests.forEach((request, index) => {
                $('#waitingRequests').append(`
                    <tr id="waitingRequest${index}">
                        <td>${request.room}</td>
                        <td>${request.roomTemp}</td>
                        <td>${request.presetTemp}</td>
                        <td>${request.presetSpeed}</td>
                        <td>${request.waitingTime}</td>
                        <td>
                            <button class="btn btn-info btn-top" onclick="moveToTop(${index})">置顶</button>
                        </td>
                    </tr>
                `);
            });
            // 电源按钮切换功能
            $('#powerButton').click(function() {
                const currentText = $(this).text();
                if (currentText === "关机") {
                    $(this).text("开机").removeClass("btn-danger").addClass("btn-success");
                } else {
                    $(this).text("关机").removeClass("btn-success").addClass("btn-danger");
                }
            });
        });

        // 置顶功能
        function moveToTop(index) {
            const requestRow = $(`#waitingRequest${index}`);
            $('#waitingRequests').prepend(requestRow);
        }
    </script>

</body>